{
	"info": {
		"_postman_id": "590b0d9f-a247-4a69-ab42-e2b002be7c95",
		"name": "HIV DISI CDR",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "2252804"
	},
	"item": [
		{
			"name": "Bootstrap",
			"item": [
				{
					"name": "Organizations",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/fhir+json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Custom test"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"resourceType\": \"Bundle\",\r\n  \"type\": \"transaction\",\r\n  \"entry\": [\r\n    {\r\n      \"resource\": {\r\n        \"resourceType\": \"Organization\",\r\n        \"id\": \"HIVOrganizationExample\",\r\n        \"meta\": {\r\n          \"profile\": [\r\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-organization\"\r\n          ]\r\n        },\r\n        \"address\": [\r\n          {\r\n            \"country\": \"DISI country\",\r\n            \"state\": \"DISI state 1\",\r\n            \"district\": \"DISI district 1\",\r\n            \"city\": \"DISI city 1\",\r\n            \"line\": [\r\n              \"DISI line 1\",\r\n              \"DISI line 2\",\r\n              \"DISI line 3\"\r\n            ],\r\n            \"postalCode\": \"DISI postal code\"\r\n          }\r\n        ],\r\n        \"name\": \"HIV Organization\",\r\n        \"identifier\": [\r\n          {\r\n            \"system\": \"http://test.org/identifier/hiv-organization\",\r\n            \"value\": \"facility1\"\r\n          }\r\n        ]\r\n      },\r\n      \"request\": {\r\n        \"method\": \"PUT\",\r\n        \"url\": \"Organization/HIVOrganizationExample\"\r\n      }\r\n    },\r\n    {\r\n      \"resource\": {\r\n        \"resourceType\": \"Organization\",\r\n        \"id\": \"HIVOrganizationExample2\",\r\n        \"meta\": {\r\n          \"profile\": [\r\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-organization\"\r\n          ]\r\n        },\r\n        \"address\": [\r\n          {\r\n            \"country\": \"DISI country\",\r\n            \"state\": \"DISI state 1\",\r\n            \"district\": \"DISI district 2\",\r\n            \"city\": \"DISI city 2\",\r\n            \"line\": [\r\n              \"DISI line 1\",\r\n              \"DISI line 2\",\r\n              \"DISI line 3\"\r\n            ],\r\n            \"postalCode\": \"DISI postal code 2\"\r\n          }\r\n        ],\r\n        \"name\": \"HIV Organization 2\",\r\n        \"identifier\": [\r\n          {\r\n            \"system\": \"http://test.org/identifier/hiv-organization\",\r\n            \"value\": \"facility2\"\r\n          }\r\n        ]\r\n      },\r\n      \"request\": {\r\n        \"method\": \"PUT\",\r\n        \"url\": \"Organization/HIVOrganizationExample2\"\r\n      }\r\n    },\r\n    {\r\n      \"resource\": {\r\n        \"resourceType\": \"Organization\",\r\n        \"id\": \"HIVOrganizationExample3\",\r\n        \"meta\": {\r\n          \"profile\": [\r\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-organization\"\r\n          ]\r\n        },\r\n        \"address\": [\r\n          {\r\n            \"country\": \"DISI country\",\r\n            \"state\": \"DISI state 2\",\r\n            \"district\": \"DISI district 3\",\r\n            \"city\": \"DISI city 3\",\r\n            \"line\": [\r\n              \"DISI line 1\",\r\n              \"DISI line 2\",\r\n              \"DISI line 3\"\r\n            ],\r\n            \"postalCode\": \"DISI postal code 3\"\r\n          }\r\n        ],\r\n        \"name\": \"HIV Organization 3\",\r\n        \"identifier\": [\r\n          {\r\n            \"system\": \"http://test.org/identifier/hiv-organization\",\r\n            \"value\": \"facility3\"\r\n          }\r\n        ]\r\n      },\r\n      \"request\": {\r\n        \"method\": \"PUT\",\r\n        \"url\": \"Organization/HIVOrganizationExample3\"\r\n      }\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{openhimUrl}}/fhir",
							"host": [
								"{{openhimUrl}}"
							],
							"path": [
								"fhir"
							]
						}
					},
					"response": []
				},
				{
					"name": "Locations",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/fhir+json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Custom test"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"resourceType\": \"Bundle\",\r\n  \"type\": \"transaction\",\r\n  \"entry\": [\r\n    {\r\n      \"resource\": {\r\n        \"resourceType\": \"Location\",\r\n        \"id\": \"HIVLocationExample\",\r\n        \"meta\": {\r\n          \"profile\": [\r\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-Location\"\r\n          ]\r\n        },\r\n        \"address\": [\r\n          {\r\n            \"country\": \"DISI country\",\r\n            \"state\": \"DISI state 1\",\r\n            \"district\": \"DISI district 1\",\r\n            \"city\": \"DISI city 1\",\r\n            \"line\": [\r\n              \"DISI line 1\",\r\n              \"DISI line 2\",\r\n              \"DISI line 3\"\r\n            ],\r\n            \"postalCode\": \"DISI postal code\"\r\n          }\r\n        ],\r\n        \"name\": \"HIV Location\",\r\n        \"identifier\": [\r\n          {\r\n            \"system\": \"http://test.org/identifier/hiv-Location\",\r\n            \"value\": \"facility1\"\r\n          }\r\n        ],\r\n        \"position\": {\r\n          \"longitude\": 24.1,\r\n          \"latitude\": -30\r\n        }\r\n      },\r\n      \"request\": {\r\n        \"method\": \"PUT\",\r\n        \"url\": \"Location/HIVLocationExample\"\r\n      }\r\n    },\r\n    {\r\n      \"resource\": {\r\n        \"resourceType\": \"Location\",\r\n        \"id\": \"HIVLocationExample2\",\r\n        \"meta\": {\r\n          \"profile\": [\r\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-Location\"\r\n          ]\r\n        },\r\n        \"address\": [\r\n          {\r\n            \"country\": \"DISI country\",\r\n            \"state\": \"DISI state 1\",\r\n            \"district\": \"DISI district 2\",\r\n            \"city\": \"DISI city 2\",\r\n            \"line\": [\r\n              \"DISI line 1\",\r\n              \"DISI line 2\",\r\n              \"DISI line 3\"\r\n            ],\r\n            \"postalCode\": \"DISI postal code 2\"\r\n          }\r\n        ],\r\n        \"name\": \"HIV Location 2\",\r\n        \"identifier\": [\r\n          {\r\n            \"system\": \"http://test.org/identifier/hiv-Location\",\r\n            \"value\": \"facility2\"\r\n          }\r\n        ],\r\n        \"position\": {\r\n          \"longitude\": 24,\r\n          \"latitude\": -30.1\r\n        }\r\n      },\r\n      \"request\": {\r\n        \"method\": \"PUT\",\r\n        \"url\": \"Location/HIVLocationExample2\"\r\n      }\r\n    },\r\n    {\r\n      \"resource\": {\r\n        \"resourceType\": \"Location\",\r\n        \"id\": \"HIVLocationExample3\",\r\n        \"meta\": {\r\n          \"profile\": [\r\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-Location\"\r\n          ]\r\n        },\r\n        \"address\": [\r\n          {\r\n            \"country\": \"DISI country\",\r\n            \"state\": \"DISI state 2\",\r\n            \"district\": \"DISI district 3\",\r\n            \"city\": \"DISI city 3\",\r\n            \"line\": [\r\n              \"DISI line 1\",\r\n              \"DISI line 2\",\r\n              \"DISI line 3\"\r\n            ],\r\n            \"postalCode\": \"DISI postal code 3\"\r\n          }\r\n        ],\r\n        \"name\": \"HIV Location 3\",\r\n        \"identifier\": [\r\n          {\r\n            \"system\": \"http://test.org/identifier/hiv-Location\",\r\n            \"value\": \"facility3\"\r\n          }\r\n        ],\r\n        \"position\": {\r\n          \"longitude\": 24.1,\r\n          \"latitude\": -30.1\r\n        }\r\n      },\r\n      \"request\": {\r\n        \"method\": \"PUT\",\r\n        \"url\": \"Location/HIVLocationExample3\"\r\n      }\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{openhimUrl}}/fhir",
							"host": [
								"{{openhimUrl}}"
							],
							"path": [
								"fhir"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Submit bundle",
			"item": [
				{
					"name": "HIV CBS Submit random bundle - full",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/fhir+json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Custom test",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"resourceType\": \"Bundle\",\n  \"id\": \"{{bundleID}}\",\n  \"type\": \"document\",\n  \"entry\": [\n    {\n      \"fullUrl\": \"Composition/{{randomHivCompositionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Composition\",\n        \"id\": \"{{randomHivCompositionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-composition\"\n          ]\n        },\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"95412-3\",\n              \"system\": \"http://loinc.org\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"identifier\": {\n          \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/hiv-case-report\",\n          \"value\": \"{{$guid}}\"\n        },\n        \"date\": \"2021-05-18\",\n        \"author\": [\n          {\n            \"reference\": \"Organization/{{registrationFacilityCode}}\"\n          }\n        ],\n        \"title\": \"HIV Case Report\",\n        \"section\": [\n          {\n            \"title\": \"Client registration\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"CLIENT-REGISTRATION\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Patient/{{randomClientGuid}}\"\n              },\n              {\n                \"reference\": \"RelatedPerson/{{randomRelatedPersonGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"HIV Diagnosis\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"HIV-DIAGNOSIS\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Condition/{{randomConditionGuid}}\"\n              },\n              {\n                \"reference\": \"Encounter/{{randomHivDiagnosisGuid}}\"\n              },\n              {\n                \"reference\": \"Observation/{{randomHIVRecencyTestGuid}}\"\n              },\n              {\n                \"reference\": \"Observation/{{randomHIVRecencyTestResultGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"HIV Entry To Care\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"HIV-ENTRY-TO-CARE\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\"\n              },\n              {\n                \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"ARV Treatment\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"arvTherapySummary\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"CarePlan/{{randomCarePlanGuid}}\"\n              }\n            ]\n          },\n          {{cd4EntryObject}},\n          {{viralSuppressionObject}},\n          {\n            \"title\": \"Death\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"DEATH\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Observation/{{randomDeathGuid}}\"\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Encounter/{{randomHivDiagnosisGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Encounter\",\n        \"id\": \"{{randomHivDiagnosisGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-disgnosis-encounter\"\n          ]\n        },\n        \"class\": {\n          \"code\": \"PRENC\",\n          \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n        },\n        \"serviceProvider\": {\n          \"reference\": \"Organization/{{hivPositiveDiagnosisFacilityCode}}\"\n        },\n        \"status\": \"finished\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Encounter/{{randomEncounterGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Encounter\",\n        \"id\": \"{{randomEncounterGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-clinical-encounter\"\n          ]\n        },\n        \"class\": {\n          \"code\": \"OBSENC\",\n          \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n        },\n        \"status\": \"finished\",\n        \"period\": {\n          \"start\": \"{{dateOfFirstClinicalVisit}}\"\n        },\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Patient/{{randomClientGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Patient\",\n        \"id\": \"{{randomClientGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-patient\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/key-population\",\n            \"valueCodeableConcept\": {\n              \"coding\": [\n                {\n                  \"code\": \"{{popStatusFhir}}\"\n                }\n              ]\n            }\n          }\n        ],\n        \"active\": true,\n        \"name\": [\n          {\n            \"use\": \"official\",\n            \"given\": [\n               \"{{randomFirstName}}\"\n            ],\n            \"family\": \"{{randomLastName}}\"\n          }\n        ],\n        \"maritalStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"{{maritalStatusFhir}}\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/v3-MaritalStatus\"\n            }\n          ]\n        },\n        \"gender\": \"{{gender}}\",\n        \"birthDate\": \"{{birthDate}}\",\n        \"telecom\": [\n          {\n            \"system\": \"phone\",\n            \"value\": \"{{$randomPhoneNumber}}\"\n          }\n        ],\n        \"address\": [\n          {\n            \"country\": \"{{randomCountry}}\",\n            \"state\": \"{{randomState}}\",\n            \"district\": \"{{randomDistrict}}\",\n            \"city\": \"{{randomCity}}\"\n          }\n        ],\n        \"identifier\": [\n          {\n            \"system\": \"https://instantopenhie.org/client{{randomClientId}}\",\n            \"value\": \"{{$guid}}\"\n          },\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/art\",\n            \"value\": \"{{$guid}}\"\n          },\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/passport\",\n            \"value\": \"{{$guid}}\"\n          },\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/nid\",\n            \"value\": \"{{nid}}\"\n          },\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/facility{{randomClientId}}\",\n            \"value\": \"{{$guid}}\"\n          }\n        ],\n        \"managingOrganization\": {\n          \"reference\": \"Organization/{{registrationFacilityCode}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"RelatedPerson/{{randomRelatedPersonGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"RelatedPerson\",\n        \"id\": \"{{randomRelatedPersonGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-related-person\"\n          ]\n        },\n        \"name\": [\n          {\n            \"given\": [\n              \"{{randomFirstName}}\"\n            ],\n            \"family\": \"{{randomLastName}}\"\n          }\n        ],\n        \"patient\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Condition/{{randomConditionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Condition\",\n        \"id\": \"{{randomConditionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-diagnosis\"\n          ]\n        },\n        \"clinicalStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"active\"\n            }\n          ]\n        },\n        \"verificationStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"confirmed\"\n            }\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"86406008\",\n              \"system\": \"http://snomed.info/sct\"\n            }\n          ]\n        },\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        },\n        \"recordedDate\": \"{{hivPositiveDate}}\",\n        \"identifier\": [\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/hiv-diagnosis\",\n            \"value\": \"{{randomHivPositiveDiagnosisUniqueID}}\"\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomHIVRecencyTestGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomHIVRecencyTestGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-recency-test-conducted\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"HIV-RECENCY-TEST-CONDUCTED\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"HIV recency test conducted\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"valueBoolean\": {{recencyTestConductedFhir}},\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomHIVRecencyTestResultGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomHIVRecencyTestResultGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-recency-result\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"HIV-RECENCY-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"HIV recency test conducted\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"valueBoolean\": {{recencyStatusFhir}},\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"EpisodeOfCare\",\n        \"id\": \"{{randomEpisodeOfCareGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-episode-of-care\"\n          ]\n        },\n        \"status\": \"active\",\n        \"patient\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"period\": {\n          \"start\": \"{{enrollmentDate}}\"\n        },\n        \"identifier\": [\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/enrollment-unique-id\",\n            \"value\": \"{{$guid}}\"\n          }\n        ],\n        \"managingOrganization\": {\n          \"reference\": \"Organization/{{enrolledToCareFacCode}}\"\n        },\n        \"diagnosis\": [\n          {\n            \"condition\": {\n              \"reference\": \"Condition/{{randomConditionGuid}}\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"CarePlan/{{randomCarePlanGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"CarePlan\",\n        \"id\": \"{{randomCarePlanGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-arv-treatment\"\n          ]\n        },\n        \"activity\": [\n          {\n            \"detail\": {\n              \"extension\": [\n                {\n                  \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/art-regimen-line\",\n                  \"valueCodeableConcept\": {\n                    \"coding\": [\n                      {\n                        \"code\": \"{{artLineFhir}}\"\n                      }\n                    ]\n                  }\n                }\n              ],\n              \"status\": \"stopped\",\n              \"kind\": \"MedicationRequest\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"45260-7\",\n                    \"system\": \"http://loinc.org\",\n                    \"display\": \"HIV ART medication\"\n                  }\n                ]\n              },\n              \"productCodeableConcept\": {\n                \"coding\": [\n                  {\n                    \"code\": \"{{artRegimen}}\"\n                  }\n                ]\n              }\n            }\n          }\n        ],\n        \"status\": \"active\",\n        \"intent\": \"plan\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"period\": {\n          \"start\": \"{{artStartDate}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomCd4Guid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomCd4Guid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-cd4-test\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"CD4-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"CD4 result\"\n            }\n          ]\n        },\n        \"component\": [\n          {\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"113056008\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"CD4 result\"\n                }\n              ]\n            },\n            \"valueInteger\": {{cd4Result}}\n          },\n          {\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"313938009\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"CD4 percentage\"\n                }\n              ]\n            },\n            \"valueInteger\": {{cd4Percentage}}\n          }\n        ],\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{cd4CollectionDate}}\"\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomViralSuppressionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomViralSuppressionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-viral-load-suppression\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"VL-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"Viral load result\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{vlDate}}\",\n        \"valueInteger\": {{vlResult}},\n        \"interpretation\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"{{vlInterpretationFhir}}\",\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-interpretation\",\n                \"display\": \"{{vlInterpretation}}\"\n              }\n            ]\n          },\n          {\n            \"coding\": [\n              {\n                \"code\": \"{{currVLSupressionFhir}}\",\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-suppression\",\n                \"display\": \"{{currVLSupression}}\"\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomDeathGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomDeathGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/death-obs\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"CAUSE-OF-DEATH\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"Cause of death\"\n            }\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/last-clinical-visit\",\n            \"valueDateTime\": \"{{dateOfLastVisit}}\"\n          }\n        ],\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{deathDate}}\",\n        \"valueCodeableConcept\": {\n          \"coding\": [\n            {\n              \"code\": \"{{deathCauseFhir}}\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-causeofdeath\",\n              \"display\": \"{{deathCause}}\"\n            }\n          ]\n        }\n      }\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{openhimUrl}}/fhir",
							"host": [
								"{{openhimUrl}}"
							],
							"path": [
								"fhir"
							]
						},
						"description": "Remove author and ARVTherapySummaryExample section reference"
					},
					"response": []
				},
				{
					"name": "DEMO HIV CBS Submit random bundle - full",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/fhir+json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Custom test",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"resourceType\": \"Bundle\",\n  \"id\": \"{{bundleID}}\",\n  \"type\": \"document\",\n  \"entry\": [\n    {\n      \"fullUrl\": \"Composition/{{randomHivCompositionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Composition\",\n        \"id\": \"{{randomHivCompositionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-composition\"\n          ]\n        },\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"95412-3\",\n              \"system\": \"http://loinc.org\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"identifier\": {\n          \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/hiv-case-report\",\n          \"value\": \"{{$guid}}\"\n        },\n        \"date\": \"2021-05-18\",\n        \"author\": [\n          {\n            \"reference\": \"Organization/{{registrationFacilityCode}}\"\n          }\n        ],\n        \"title\": \"HIV Case Report\",\n        \"section\": [\n          {\n            \"title\": \"Client registration\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"CLIENT-REGISTRATION\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Patient/{{randomClientGuid}}\"\n              },\n              {\n                \"reference\": \"RelatedPerson/{{randomRelatedPersonGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"HIV Diagnosis\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"HIV-DIAGNOSIS\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Condition/{{randomConditionGuid}}\"\n              },\n              {\n                \"reference\": \"Encounter/{{randomHivDiagnosisGuid}}\"\n              },\n              {\n                \"reference\": \"Observation/{{randomHIVRecencyTestGuid}}\"\n              },\n              {\n                \"reference\": \"Observation/{{randomHIVRecencyTestResultGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"HIV Entry To Care\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"HIV-ENTRY-TO-CARE\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\"\n              },\n              {\n                \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"ARV Treatment\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"arvTherapySummary\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"CarePlan/{{randomCarePlanGuid}}\"\n              }\n            ]\n          },\n          {{cd4EntryObject}},\n          {{viralSuppressionObject}},\n          {\n            \"title\": \"Death\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"DEATH\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Observation/{{randomDeathGuid}}\"\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Encounter/{{randomHivDiagnosisGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Encounter\",\n        \"id\": \"{{randomHivDiagnosisGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-disgnosis-encounter\"\n          ]\n        },\n        \"episodeOfCare\": [\n          {\n            \"reference\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\"\n          }\n        ],\n        \"class\": {\n          \"code\": \"PRENC\",\n          \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n        },\n        \"serviceProvider\": {\n          \"reference\": \"Organization/{{hivPositiveDiagnosisFacilityCode}}\"\n        },\n        \"status\": \"finished\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Encounter/{{randomEncounterGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Encounter\",\n        \"id\": \"{{randomEncounterGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-clinical-encounter\"\n          ]\n        },\n        \"class\": {\n          \"code\": \"OBSENC\",\n          \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n        },\n        \"status\": \"finished\",\n        \"extension\": [\n            {\n                \"url\": \"http://openhie.org/fhir/hiv-casereporting/next-visit\",\n                \"valueDateTime\": \"{{nextVisitdate}}\"\n            }\n        ],\n        \"period\": {\n          \"start\": \"{{dateOfFirstClinicalVisit}}\"\n        },\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Patient/{{randomClientGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Patient\",\n        \"id\": \"{{randomClientGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-patient\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/key-population\",\n            \"valueCodeableConcept\": {\n              \"coding\": [\n                {\n                  \"code\": \"{{popStatusFhir}}\"\n                }\n              ]\n            }\n          }\n        ],\n        \"active\": true,\n        \"name\": [\n          {\n            \"use\": \"official\",\n            \"given\": [\n               \"{{randomFirstName}}\",\n               \"{{randomMiddleName}}\"\n            ],\n            \"family\": \"{{randomLastName}}\"\n          }\n        ],\n        \"maritalStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"{{maritalStatusFhir}}\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/v3-MaritalStatus\"\n            }\n          ]\n        },\n        \"gender\": \"{{gender}}\",\n        \"birthDate\": \"{{birthDate}}\",\n        \"telecom\": [\n          {\n            \"system\": \"phone\",\n            \"value\": \"{{$randomPhoneNumber}}\"\n          }\n        ],\n        \"address\": [\n          {\n            \"country\": \"{{randomCountry}}\",\n            \"state\": \"{{randomState}}\",\n            \"district\": \"{{randomDistrict}}\",\n            \"city\": \"{{randomCity}}\"\n          }\n        ],\n        \"identifier\": [\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/OpenMRSID\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"https://instantopenhie.org/client{{randomClientId}}\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/art\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/passport\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/nid\",\n                \"value\": \"{{nid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/facility{{randomClientId}}\",\n                \"value\": \"{{$guid}}\"\n            }\n        ],\n        \"managingOrganization\": {\n          \"reference\": \"Organization/{{registrationFacilityCode}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"RelatedPerson/{{randomRelatedPersonGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"RelatedPerson\",\n        \"id\": \"{{randomRelatedPersonGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-related-person\"\n          ]\n        },\n        \"name\": [\n          {\n            \"given\": [\n              \"{{randomFirstName}}\"\n            ],\n            \"family\": \"{{randomLastName}}\"\n          }\n        ],\n        \"patient\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Condition/{{randomConditionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Condition\",\n        \"id\": \"{{randomConditionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-diagnosis\"\n          ]\n        },\n        \"clinicalStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"active\"\n            }\n          ]\n        },\n        \"verificationStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"confirmed\"\n            }\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"86406008\",\n              \"system\": \"http://snomed.info/sct\"\n            }\n          ]\n        },\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n         \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        },\n        \"recordedDate\": \"{{hivPositiveDate}}\",\n        \"identifier\": [\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/hiv-diagnosis\",\n            \"value\": \"{{randomHivPositiveDiagnosisUniqueID}}\"\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomHIVRecencyTestGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomHIVRecencyTestGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-recency-test-conducted\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"HIV-RECENCY-TEST-CONDUCTED\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"HIV recency test conducted\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"valueBoolean\": {{recencyTestConductedFhir}},\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomHIVRecencyTestResultGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomHIVRecencyTestResultGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-recency-result\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"HIV-RECENCY-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"HIV recency test conducted\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"valueBoolean\": {{recencyStatusFhir}},\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"EpisodeOfCare\",\n        \"id\": \"{{randomEpisodeOfCareGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-episode-of-care\"\n          ]\n        },\n         \"referralRequest\": [\n          {\n            \"reference\": \"ServiceRequest/{{serviceRequestGuid}}\"\n          }\n        ],\n        \"status\": \"active\",\n        \"patient\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"period\": {\n          \"start\": \"{{enrollmentDate}}\"\n        },\n        \"identifier\": [\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/enrollment-unique-id\",\n            \"value\": \"{{$guid}}\"\n          }\n        ],\n        \"managingOrganization\": {\n          \"reference\": \"Organization/{{enrolledToCareFacCode}}\"\n        },\n        \"diagnosis\": [\n          {\n            \"condition\": {\n              \"reference\": \"Condition/{{randomConditionGuid}}\"\n            }\n          }\n        ]\n      }\n    },\n    {\n        \"fullUrl\": \"ServiceRequest/{{serviceRequestGuid}}\",\n        \"resource\": {\n            \"resourceType\": \"ServiceRequest\",\n            \"id\": \"{{serviceRequestGuid}}\",\n            \"meta\": {\n                \"profile\": [\n                \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-service-request\"\n                ]\n            },\n            \"occurrenceDateTime\": \"{{hivServiceRequestDate}}\",\n            \"status\": \"completed\",\n            \"intent\": \"order\",\n            \"encounter\": {\n                \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n            },\n            \"subject\": {\n                \"reference\": \"Patient/{{randomClientGuid}}\"\n            }\n        }\n    },\n    {\n      \"fullUrl\": \"CarePlan/{{randomCarePlanGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"CarePlan\",\n        \"id\": \"{{randomCarePlanGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-arv-treatment\"\n          ]\n        },\n        \"activity\": [\n          {\n             \"outcomeCodeableConcept\": [\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/art-outcome-codes\",\n                            \"code\": \"162572\",\n                            \"text\": \"Refused\"\n                        }\n                    ]\n                },\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"439771001\",\n                            \"text\": \"Contacted\"\n                        }\n                    ]\n                }\n            ],\n            \"detail\": {\n                \"scheduledPeriod\": \"{{careplanScheduledPeriod}}\",\n                \"extension\": [\n                {\n                    \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/art-regimen-line\",\n                    \"valueCodeableConcept\": {\n                        \"coding\": [\n                            {\n                                \"code\": \"{{artLineFhir}}\"\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/art-status\",\n                    \"artStatusCodeableConcept\": {\n                        \"coding\": [\n                        {\n                            \"code\": {{artStatusCode}},\n                            \"text\": \"{{artStatusText}}\"\n                        }]\n                    }\n                }\n              ],\n              \"status\": \"stopped\",\n              \"kind\": \"MedicationRequest\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"45260-7\",\n                    \"system\": \"http://loinc.org\",\n                    \"display\": \"HIV ART medication\"\n                  }\n                ]\n              },\n              \"productCodeableConcept\": {\n                \"coding\": [\n                  {\n                    \"code\": \"{{artRegimen}}\"\n                  }\n                ]\n              }\n            }\n          }\n        ],\n        \"status\": \"active\",\n        \"intent\": \"plan\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"period\": {\n          \"start\": \"{{artStartDate}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomCd4Guid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomCd4Guid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-cd4-test\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"CD4-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"CD4 result\"\n            }\n          ]\n        },\n        \"component\": [\n          {\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"113056008\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"CD4 result\"\n                }\n              ]\n            },\n            \"valueInteger\": {{cd4Result}}\n          },\n          {\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"313938009\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"CD4 percentage\"\n                }\n              ]\n            },\n            \"valueInteger\": {{cd4Percentage}}\n          }\n        ],\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{cd4CollectionDate}}\"\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomViralSuppressionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomViralSuppressionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-viral-load-suppression\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"VL-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"Viral load result\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{vlDate}}\",\n        \"valueInteger\": {{vlResult}},\n        \"interpretation\": [\n          {\n            \"coding\": [\n                {\n                    \"code\": \"{{vlInterpretationFhir}}\",\n                    \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-interpretation\",\n                    \"display\": \"{{vlInterpretation}}\"\n                }\n            ]\n          },\n          {\n            \"coding\": [\n              {\n                \"code\": \"{{currVLSupressionFhir}}\",\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-suppression\",\n                \"display\": \"{{currVLSupression}}\"\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomDeathGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomDeathGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/death-obs\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"CAUSE-OF-DEATH\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"Cause of death\"\n            }\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/last-clinical-visit\",\n            \"valueDateTime\": \"{{dateOfLastVisit}}\"\n          }\n        ],\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{deathDate}}\",\n        \"valueCodeableConcept\": {\n          \"coding\": [\n            {\n              \"code\": \"{{deathCauseFhir}}\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-causeofdeath\",\n              \"display\": \"{{deathCause}}\"\n            }\n          ]\n        }\n      }\n    },\n    {\n    \"resource\": {\n        \"resourceType\": \"Procedure\",\n        \"id\": \"{{randomLabProcedureGuid}}\",\n        \"status\": \"completed\",\n        \"category\": {\n            \"coding\": [\n                {\n                    \"system\": \"http://snomed.info/sct\",\n                    \"code\": \"108252007\",\n                    \"display\": \"Laboratory procedure\"\n                }\n            ]\n        },\n        \"code\": {\n            \"coding\": [\n                {\n                    \"system\": \"http://snomed.info/sct\",\n                    \"code\": \"315124004\",\n                    \"display\": \"Human immunodeficiency virus viral load\"\n                }\n            ],\n            \"text\": \"viral load\"\n        },\n        \"subject\": {\n            \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"encounter\": {\n            \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        },\n        \"reasonCode\": [\n            {\n                \"coding\": [\n                    {\n                        \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/vl-reason-codes\",\n                        \"code\": \"{{viralLoadIndicationReasonCode}}\",\n                        \"text\": \"{{viralLoadIndicationReason}}\"\n                    }\n                ]\n            }\n        ]\n    },\n    \"request\": {\n        \"method\": \"PUT\",\n        \"url\": \"Procedure/{{randomLabProcedureGuid}}\"\n    }\n   },\n   {\n        \"resource\": {\n            \"resourceType\": \"MedicationDispense\",\n            \"id\": \"{{randomMedDispGuid}}\",\n            \"status\": \"completed\",\n            \"context\": {\n                \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n            },\n            \"subject\": {\n                \"reference\": \"Patient/{{randomClientGuid}}\"\n            },\n            \"quantity\": {\n                \"value\": {{doseQuantity}},\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-orderableDrugForm\",\n                \"code\": \"TAB\"\n            }\n        },\n        \"request\": {\n            \"method\": \"PUT\",\n            \"url\": \"MedicationDispense/{{randomMedDispGuid}}\"\n        }\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{openhimUrl}}/fhir",
							"host": [
								"{{openhimUrl}}"
							],
							"path": [
								"fhir"
							]
						},
						"description": "Remove author and ARVTherapySummaryExample section reference"
					},
					"response": []
				},
				{
					"name": "Program Care & Monitoring HIV CBS Submit random bundle - full",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/fhir+json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Custom test",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"resourceType\": \"Bundle\",\n  \"id\": \"{{bundleID}}\",\n  \"type\": \"document\",\n  \"entry\": [\n    {\n      \"fullUrl\": \"Composition/{{randomHivCompositionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Composition\",\n        \"id\": \"{{randomHivCompositionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-composition\"\n          ]\n        },\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"95412-3\",\n              \"system\": \"http://loinc.org\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"identifier\": {\n          \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/hiv-case-report\",\n          \"value\": \"{{$guid}}\"\n        },\n        \"date\": \"2021-05-18\",\n        \"author\": [\n          {\n            \"reference\": \"Organization/{{registrationFacilityCode}}\"\n          }\n        ],\n        \"title\": \"HIV Case Report\",\n        \"section\": [\n          {\n            \"title\": \"Client registration\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"CLIENT-REGISTRATION\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Patient/{{randomClientGuid}}\"\n              },\n              {\n                \"reference\": \"RelatedPerson/{{randomRelatedPersonGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"HIV Diagnosis\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"HIV-DIAGNOSIS\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Condition/{{randomConditionGuid}}\"\n              },\n              {\n                \"reference\": \"Encounter/{{randomHivDiagnosisGuid}}\"\n              },\n              {\n                \"reference\": \"Observation/{{randomHIVRecencyTestGuid}}\"\n              },\n              {\n                \"reference\": \"Observation/{{randomHIVRecencyTestResultGuid}}\"\n              },\n              {\n                \"reference\": \"Observation/{{randomDateHIVTestDoneGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"HIV Entry To Care\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"HIV-ENTRY-TO-CARE\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\"\n              },\n              {\n                \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n              }\n            ]\n          },\n          {\n            \"title\": \"ARV Treatment\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"arvTherapySummary\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"CarePlan/{{randomCarePlanGuid}}\"\n              }\n            ]\n          },\n          {{cd4EntryObject}},\n          {{viralSuppressionObject}},\n          {\n            \"title\": \"Death\",\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"DEATH\",\n                  \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"\n                }\n              ]\n            },\n            \"entry\": [\n              {\n                \"reference\": \"Observation/{{randomDeathGuid}}\"\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Encounter/{{randomHivDiagnosisGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Encounter\",\n        \"id\": \"{{randomHivDiagnosisGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-disgnosis-encounter\"\n          ]\n        },\n        \"episodeOfCare\": [\n          {\n            \"reference\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\"\n          }\n        ],\n        \"class\": {\n          \"code\": \"PRENC\",\n          \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n        },\n        \"serviceProvider\": {\n          \"reference\": \"Organization/{{hivPositiveDiagnosisFacilityCode}}\"\n        },\n        \"status\": \"finished\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Encounter/{{randomEncounterGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Encounter\",\n        \"id\": \"{{randomEncounterGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-clinical-encounter\"\n          ]\n        },\n        \"class\": {\n          \"code\": \"OBSENC\",\n          \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n        },\n        \"status\": \"finished\",\n        \"extension\": [\n            {\n                \"url\": \"http://openhie.org/fhir/hiv-casereporting/next-visit\",\n                \"valueDateTime\": \"{{nextVisitdate}}\"\n            }\n        ],\n        \"period\": {\n          \"start\": \"{{dateOfFirstClinicalVisit}}\"\n        },\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Patient/{{randomClientGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Patient\",\n        \"id\": \"{{randomClientGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-patient\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/key-population\",\n            \"valueCodeableConcept\": {\n              \"coding\": [\n                {\n                  \"code\": \"{{popStatusFhir}}\"\n                }\n              ]\n            }\n          }\n        ],\n        \"active\": true,\n        \"name\": [\n          {\n            \"use\": \"official\",\n            \"given\": [\n               \"{{randomFirstName}}\",\n               \"{{randomMiddleName}}\"\n            ],\n            \"family\": \"{{randomLastName}}\"\n          }\n        ],\n        \"maritalStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"{{maritalStatusFhir}}\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/v3-MaritalStatus\"\n            }\n          ]\n        },\n        \"gender\": \"{{gender}}\",\n        \"birthDate\": \"{{birthDate}}\",\n        \"telecom\": [\n          {\n            \"system\": \"phone\",\n            \"value\": \"{{$randomPhoneNumber}}\"\n          }\n        ],\n        \"address\": [\n          {\n            \"country\": \"{{randomCountry}}\",\n            \"state\": \"{{randomState}}\",\n            \"district\": \"{{randomDistrict}}\",\n            \"city\": \"{{randomCity}}\"\n          }\n        ],\n        \"identifier\": [\n            {\n                \"system\": \"http://cdr.aacahb.gov.et/OpenMRSID\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"https://instantopenhie.org/client{{randomClientId}}\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/art\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/passport\",\n                \"value\": \"{{$guid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/nid\",\n                \"value\": \"{{nid}}\"\n            },\n            {\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/facility{{randomClientId}}\",\n                \"value\": \"{{$guid}}\"\n            }\n        ],\n        \"managingOrganization\": {\n          \"reference\": \"Organization/{{registrationFacilityCode}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"RelatedPerson/{{randomRelatedPersonGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"RelatedPerson\",\n        \"id\": \"{{randomRelatedPersonGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-related-person\"\n          ]\n        },\n        \"name\": [\n          {\n            \"given\": [\n              \"{{randomFirstName}}\"\n            ],\n            \"family\": \"{{randomLastName}}\"\n          }\n        ],\n        \"patient\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Condition/{{randomConditionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Condition\",\n        \"id\": \"{{randomConditionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-diagnosis\"\n          ]\n        },\n        \"clinicalStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"active\"\n            }\n          ]\n        },\n        \"verificationStatus\": {\n          \"coding\": [\n            {\n              \"code\": \"confirmed\"\n            }\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"86406008\",\n              \"system\": \"http://snomed.info/sct\"\n            }\n          ]\n        },\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n         \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        },\n        \"recordedDate\": \"{{hivPositiveDate}}\",\n        \"identifier\": [\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/hiv-diagnosis\",\n            \"value\": \"{{randomHivPositiveDiagnosisUniqueID}}\"\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomDateHIVTestDoneGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomDateHIVTestDoneGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/date-tested-for-hiv\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"DATE-TESTED-FOR-HIV\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"Date tested for HIV\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"valueDateTime\": \"{{dateTestedForHIV}}\",\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomHIVRecencyTestGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomHIVRecencyTestGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-recency-test-conducted\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"HIV-RECENCY-TEST-CONDUCTED\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"HIV recency test conducted\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"valueBoolean\": {{recencyTestConductedFhir}},\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomHIVRecencyTestResultGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomHIVRecencyTestResultGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-recency-result\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"HIV-RECENCY-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"HIV recency test conducted\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"valueBoolean\": {{recencyStatusFhir}},\n        \"encounter\": {\n          \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"EpisodeOfCare/{{randomEpisodeOfCareGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"EpisodeOfCare\",\n        \"id\": \"{{randomEpisodeOfCareGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-episode-of-care\"\n          ]\n        },\n         \"referralRequest\": [\n          {\n            \"reference\": \"ServiceRequest/{{serviceRequestGuid}}\"\n          }\n        ],\n        \"status\": \"active\",\n        \"patient\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"period\": {\n          \"start\": \"{{enrollmentDate}}\"\n        },\n        \"identifier\": [\n          {\n            \"system\": \"http://openhie.org/fhir/hiv-casereporting/identifier/enrollment-unique-id\",\n            \"value\": \"{{$guid}}\"\n          }\n        ],\n        \"managingOrganization\": {\n          \"reference\": \"Organization/{{enrolledToCareFacCode}}\"\n        },\n        \"diagnosis\": [\n          {\n            \"condition\": {\n              \"reference\": \"Condition/{{randomConditionGuid}}\"\n            }\n          }\n        ]\n      }\n    },\n    {\n        \"fullUrl\": \"ServiceRequest/{{serviceRequestGuid}}\",\n        \"resource\": {\n            \"resourceType\": \"ServiceRequest\",\n            \"id\": \"{{serviceRequestGuid}}\",\n            \"meta\": {\n                \"profile\": [\n                \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-service-request\"\n                ]\n            },\n            \"occurrenceDateTime\": \"{{hivServiceRequestDate}}\",\n            \"status\": \"completed\",\n            \"intent\": \"order\",\n            \"specimen\": [\n                {\n                    \"reference\": \"Specimen/{{vlSpecimenGuid}}\"\n                }\n            ],\n            \"encounter\": {\n                \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n            },\n            \"subject\": {\n                \"reference\": \"Patient/{{randomClientGuid}}\"\n            }\n        }\n    },\n    {\n      \"fullUrl\": \"CarePlan/{{randomCarePlanGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"CarePlan\",\n        \"id\": \"{{randomCarePlanGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-arv-treatment\"\n          ]\n        },\n        \"activity\": [\n          {\n             \"outcomeCodeableConcept\": [\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/art-outcome-codes\",\n                            \"code\": \"162572\",\n                            \"text\": \"Refused\"\n                        }\n                    ]\n                },\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"439771001\",\n                            \"text\": \"Contacted\"\n                        }\n                    ]\n                }\n            ],\n            \"detail\": {\n                \"scheduledPeriod\": \"{{careplanScheduledPeriod}}\",\n                \"extension\": [\n                {\n                    \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/art-regimen-line\",\n                    \"valueCodeableConcept\": {\n                        \"coding\": [\n                            {\n                                \"code\": \"{{artLineFhir}}\"\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/art-status\",\n                    \"artStatusCodeableConcept\": {\n                        \"coding\": [\n                        {\n                            \"code\": {{artStatusCode}},\n                            \"text\": \"{{artStatusText}}\"\n                        }]\n                    }\n                }\n              ],\n              \"status\": \"stopped\",\n              \"kind\": \"MedicationRequest\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"45260-7\",\n                    \"system\": \"http://loinc.org\",\n                    \"display\": \"HIV ART medication\"\n                  }\n                ]\n              },\n              \"productCodeableConcept\": {\n                \"coding\": [\n                  {\n                    \"code\": \"{{artRegimen}}\"\n                  }\n                ]\n              }\n            }\n          }\n        ],\n        \"status\": \"active\",\n        \"intent\": \"plan\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"period\": {\n          \"start\": \"{{artStartDate}}\"\n        }\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomCd4Guid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomCd4Guid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-cd4-test\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"CD4-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"CD4 result\"\n            }\n          ]\n        },\n        \"component\": [\n          {\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"113056008\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"CD4 result\"\n                }\n              ]\n            },\n            \"valueInteger\": {{cd4Result}}\n          },\n          {\n            \"code\": {\n              \"coding\": [\n                {\n                  \"code\": \"313938009\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"CD4 percentage\"\n                }\n              ]\n            },\n            \"valueInteger\": {{cd4Percentage}}\n          }\n        ],\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{cd4CollectionDate}}\"\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomViralSuppressionGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomViralSuppressionGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/hiv-viral-load-suppression\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"VL-RESULT\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"Viral load result\"\n            }\n          ]\n        },\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{vlDate}}\",\n        \"valueInteger\": {{vlResult}},\n        \"interpretation\": [\n          {\n            \"coding\": [\n                {\n                    \"code\": \"{{vlInterpretationFhir}}\",\n                    \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-interpretation\",\n                    \"display\": \"{{vlInterpretation}}\"\n                }\n            ]\n          },\n          {\n            \"coding\": [\n              {\n                \"code\": \"{{currVLSupressionFhir}}\",\n                \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-suppression\",\n                \"display\": \"{{currVLSupression}}\"\n              }\n            ]\n          }\n        ],\n        \"note\": [\n          {\n            \"authorReference\": {\n                \"reference\": \"Organization/{{registrationFacilityCode}}\"\n            },\n            \"text\": \"{{vlComments}}\",\n            \"time\": \"{{vlCommentsDate}}\"\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"Observation/{{randomDeathGuid}}\",\n      \"resource\": {\n        \"resourceType\": \"Observation\",\n        \"id\": \"{{randomDeathGuid}}\",\n        \"meta\": {\n          \"profile\": [\n            \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/death-obs\"\n          ]\n        },\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"CAUSE-OF-DEATH\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-hiv-obs-codes\",\n              \"display\": \"Cause of death\"\n            }\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/last-clinical-visit\",\n            \"valueDateTime\": \"{{dateOfLastVisit}}\"\n          }\n        ],\n        \"status\": \"final\",\n        \"subject\": {\n          \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"effectiveDateTime\": \"{{deathDate}}\",\n        \"valueCodeableConcept\": {\n          \"coding\": [\n            {\n              \"code\": \"{{deathCauseFhir}}\",\n              \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-vl-causeofdeath\",\n              \"display\": \"{{deathCause}}\"\n            }\n          ]\n        }\n      }\n    },\n    {\n            \"fullUrl\": \"Specimen/{{vlSpecimenGuid}}\",\n            \"request\": {\n                \"method\": \"PUT\",\n                \"url\": \"Specimen/{{vlSpecimenGuid}}\"\n            },\n            \"resource\": {\n                \"resourceType\": \"Specimen\",\n                \"id\": \"{{vlSpecimenGuid}}\",\n                \"meta\": {\n                    \"profile\": [\n                        \"http://openhie.org/fhir/hiv-casereporting/StructureDefinition/viral-load-specimen\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"http://snomed.info/sct\",\n                        \"code\": \"395058002\"\n                    }\n                ],\n                \"type\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"395058002\"\n                        }\n                    ]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/{{randomClientGuid}}\"\n                },\n                \"collection\": {\n                    \"collectedDateTime\": \"{{random_collection_date}}\"\n                }\n            }\n        },\n    {\n    \"resource\": {\n        \"resourceType\": \"Procedure\",\n        \"id\": \"{{randomLabProcedureGuid}}\",\n        \"status\": \"completed\",\n        \"category\": {\n            \"coding\": [\n                {\n                    \"system\": \"http://snomed.info/sct\",\n                    \"code\": \"108252007\",\n                    \"display\": \"Laboratory procedure\"\n                }\n            ]\n        },\n        \"code\": {\n            \"coding\": [\n                {\n                    \"system\": \"http://snomed.info/sct\",\n                    \"code\": \"315124004\",\n                    \"display\": \"Human immunodeficiency virus viral load\"\n                }\n            ],\n            \"text\": \"viral load\"\n        },\n        \"subject\": {\n            \"reference\": \"Patient/{{randomClientGuid}}\"\n        },\n        \"encounter\": {\n            \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n        },\n        \"reasonCode\": [\n            {\n                \"coding\": [\n                    {\n                        \"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/vl-reason-codes\",\n                        \"code\": \"{{viralLoadIndicationReasonCode}}\",\n                        \"text\": \"{{viralLoadIndicationReason}}\"\n                    }\n                ]\n            }\n        ]\n    },\n    \"request\": {\n        \"method\": \"PUT\",\n        \"url\": \"Procedure/{{randomLabProcedureGuid}}\"\n    }\n   },\n   {\n        \"resource\": {\n            \"resourceType\": \"MedicationDispense\",\n            \"id\": \"{{randomMedDispGuid}}\",\n            \"status\": \"completed\",\n            \"context\": {\n                \"reference\": \"Encounter/{{randomEncounterGuid}}\"\n            },\n            \"subject\": {\n                \"reference\": \"Patient/{{randomClientGuid}}\"\n            },\n            \"quantity\": {\n                \"value\": {{doseQuantity}},\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-orderableDrugForm\",\n                \"code\": \"TAB\"\n            }\n        },\n        \"request\": {\n            \"method\": \"PUT\",\n            \"url\": \"MedicationDispense/{{randomMedDispGuid}}\"\n        }\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{openhimUrl}}/fhir",
							"host": [
								"{{openhimUrl}}"
							],
							"path": [
								"fhir"
							]
						},
						"description": "Remove author and ARVTherapySummaryExample section reference"
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"const moment = require('moment');",
					"const uuid = require('uuid');",
					"",
					"",
					"const visitDate = moment().subtract((Math.random() * 10), 'years')",
					"const orgs = ['HIVOrganizationExample', 'HIVOrganizationExample2', 'HIVOrganizationExample3']",
					"const regimens = ['TDF/3TC/DTG', 'TDF/3TC/EFV']",
					"",
					"const artRegimenLinesForFHIR = [",
					"    ['First Line', 'FIRST-LINE'],",
					"    ['Second Line', 'SECOND-LINE'],",
					"    ['Third Line', 'THIRD-LINE']",
					"]",
					"",
					"const deathCausesForFHIR = [",
					"    ['HIV Related', 'HIV'],",
					"    ['Non HIV Related', 'NON-HIV']",
					"]",
					"",
					"const interpretationsForForFHIR = [",
					"    ['Detectable', 'D'],",
					"    ['Non Detectable', 'ND'],",
					"    ['Unknown', 'UNK']",
					"]",
					"",
					"const suppressionStatusForForFHIR = [",
					"    ['Suppressed', 'S'],",
					"    ['Unsuppressed', 'UNSUP'],",
					"    ['Unknown', 'UNK']",
					"]",
					"",
					"const genders = ['male', 'female', 'other', 'unknown']",
					"",
					"const age = Math.floor(Math.random() * 70)",
					"const days = Math.floor(Math.random() * 10)",
					"",
					"const firstName = pm.variables.replaceIn(\"{{$randomFirstName}}\")// pm.variables.get('firstName')",
					"const middleName = pm.variables.replaceIn(\"{{$randomFirstName}}\") //pm.variables.get('middleName')",
					"const lastName = pm.variables.replaceIn(\"{{$randomLastName}}\") //pm.variables.get('lastName')",
					"const gender = genders[getRandomInt(0, genders.length - 1)] //pm.variables.get('gender')",
					"const dateOfBirth = moment(visitDate).subtract(age, 'years').format('YYYY-MM-DD') //pm.variables.get('dateOfBirth')",
					"const nid = getRandomInt(1111111111, 9999999999) //pm.variables.get('NID')",
					"const registrationFacilityCode = orgs[getRandomInt(0, orgs.length - 1)] //pm.variables.get('registrationFacilityCode')",
					"const addressCountry = \"QA Country\" //pm.variables.get('addressCountry')",
					"const addressProvince = \"QA State\" //pm.variables.get('addressProvince')",
					"const addressDistrict = \"QA District\" //pm.variables.get('addressDistrict')",
					"const addressCity = \"QA Ward\" //pm.variables.get('addressCity')",
					"const hivPositiveDate = moment(visitDate) //pm.variables.get('hivPositiveDate')",
					"const hivPositiveDiagnosisFacilityCode = orgs[getRandomInt(0, 2)] //pm.variables.get('hivPositiveDiagnosisFacilityCode')",
					"const hivPositiveTestingUID = getRandomInt(1111111, 9999999)// pm.variables.get('hivPositiveTestingUID')",
					"const dateClientEnrolledToCare = moment(visitDate) //pm.variables.get('dateClientEnrolledToCare')",
					"const enrolledToCareUID = getRandomInt(1111111, 9999999)//pm.variables.get('enrolledToCareUID')",
					"const enrolledToCareFacCode = orgs[getRandomInt(0, 2)] //pm.variables.get('enrolledToCareFacCode')",
					"const enrolledToCareDateFirstClinicalVisit = moment(visitDate) //pm.variables.get('enrolledToCareDateFirstClinicalVisit')",
					"const artInitiationDate = moment(visitDate) //pm.variables.get('artInitiationDate')",
					"const artInitiationRegimenLine = artRegimenLinesForFHIR[getRandomInt(0, artRegimenLinesForFHIR.length - 1)][0] //pm.variables.get('artInitiationRegimenLine')",
					"const artInitiationRegimen = regimens[getRandomInt(0, regimens.length - 1)] //pm.variables.get('artInitiationRegimen')",
					"const dateOfDeath = moment(visitDate) //pm.variables.get('dateOfDeath')",
					"const deathDateLastClinicalVisit = moment(visitDate) //pm.variables.get('deathDateLastClinicalVisit')",
					"const deathCause = deathCausesForFHIR[getRandomInt(0, deathCausesForFHIR.length - 1)][0] //pm.variables.get('deathCause')",
					"const cd4CollectionDate = moment(visitDate) //pm.variables.get('cd4CollectionDate')",
					"const cd4Result = getRandomInt(555, 999) //pm.variables.get('cd4Result')",
					"const cd4Percentage = parseInt(cd4Result / 10) //pm.variables.get('cd4Percentage')",
					"const vlDate = moment(visitDate) //pm.variables.get('vlDate')",
					"const vlResult = getRandomInt(700, 1100) //pm.variables.get('vlResult')",
					"const vlInterpretation = interpretationsForForFHIR[getRandomInt(0, interpretationsForForFHIR.length - 1)][0] //pm.variables.get('vlInterpretation')",
					"const currVLSupression = suppressionStatusForForFHIR[getRandomInt(0, suppressionStatusForForFHIR.length - 1)][0] //pm.variables.get('currVLSupression')",
					"const doseQuantity = [30, 60, 90, 120, 150]",
					"",
					"pm.variables.set('careplanScheduledPeriod', moment(visitDate).format('YYYY-MM-DD'))",
					"pm.variables.set('nextVisitdate', moment(visitDate).add(days, 'days').format('YYYY-MM-DD'))",
					"pm.variables.set('doseQuantity', doseQuantity[getRandomInt(0, doseQuantity.length - 1)])",
					"",
					"pm.variables.set('dateTestedForHIV', moment(visitDate).format('YYYY-MM-DD'))",
					"",
					"pm.variables.set('randomClientId', getRandomInt(1, 3))",
					"pm.variables.set('randomClientGuid', uuid.v4())",
					"pm.variables.set('randomFirstName', firstName)",
					"pm.variables.set('randomMiddleName', middleName)",
					"pm.variables.set('randomLastName', lastName)",
					"pm.variables.set('birthDate', dateOfBirth)",
					"pm.variables.set('registrationFacilityCode', registrationFacilityCode)",
					"pm.variables.set('nid', nid)",
					"pm.variables.set('randomCountry', addressCountry)",
					"pm.variables.set('randomState', addressProvince)",
					"pm.variables.set('randomDistrict', addressDistrict)",
					"pm.variables.set('randomCity', addressCity)",
					"pm.variables.set('gender', gender)",
					"pm.variables.set('randomHivPositiveDiagnosisUniqueID', hivPositiveTestingUID)",
					"",
					"pm.variables.set('bundleID', uuid.v4())",
					"pm.variables.set('randomHivCompositionGuid', uuid.v4())",
					"pm.variables.set('randomHivDiagnosisGuid', uuid.v4())",
					"pm.variables.set('randomEncounterGuid', uuid.v4())",
					"pm.variables.set('randomRelatedPersonGuid', uuid.v4())",
					"pm.variables.set('randomConditionGuid', uuid.v4())",
					"pm.variables.set('randomHIVRecencyTestGuid', uuid.v4())",
					"pm.variables.set('randomHIVRecencyTestResultGuid', uuid.v4())",
					"pm.variables.set('randomEpisodeOfCareGuid', uuid.v4())",
					"pm.variables.set('serviceRequestGuid', uuid.v4())",
					"pm.variables.set('randomCarePlanGuid', uuid.v4())",
					"pm.variables.set('randomCd4Guid', uuid.v4())",
					"pm.variables.set('randomViralSuppressionGuid', uuid.v4())",
					"pm.variables.set('randomDeathGuid', uuid.v4())",
					"pm.variables.set('randomLabProcedureGuid', uuid.v4())",
					"pm.variables.set('vlSpecimenGuid', uuid.v4())",
					"pm.variables.set('randomMedDispGuid', uuid.v4())",
					"pm.variables.set('randomDateHIVTestDoneGuid', uuid.v4())",
					"",
					"function isNullOrEmpty(value)",
					"{",
					"    if (value !== null && value !== undefined && value != ''  && value != ' ')",
					"    {",
					"         return false",
					"    }",
					"    else{",
					"        return true",
					"    }",
					"}",
					"",
					"function getRandomInt(min, max) {",
					"    min = Math.ceil(min);",
					"    max = Math.floor(max);",
					"    return Math.floor(Math.random() * (max - min + 1)) + min;",
					"}",
					"",
					"pm.variables.set('randomClientId', getRandomInt(1, 3))",
					"",
					"pm.variables.set('hivPositiveDiagnosisFacilityCode', hivPositiveDiagnosisFacilityCode)",
					"pm.variables.set('hivPositiveDate', hivPositiveDate)",
					"pm.variables.set('encounterDate', hivPositiveDate)",
					"",
					"pm.variables.set('enrolledToCareFacCode', enrolledToCareFacCode)",
					"pm.variables.set('enrolledToCareUID', enrolledToCareUID)",
					"pm.variables.set('enrollmentDate', dateClientEnrolledToCare)",
					"pm.variables.set('dateOfFirstClinicalVisit', enrolledToCareDateFirstClinicalVisit)",
					"",
					"",
					"",
					"pm.variables.set('artStartDate', artInitiationDate)",
					"pm.variables.set('artLine', artInitiationRegimenLine)",
					"",
					"",
					"for (let x = 0; x < artRegimenLinesForFHIR.length; x++) {",
					"    if (artRegimenLinesForFHIR[x][0] == artInitiationRegimenLine) {",
					"        var FHIRRegimenLine = artRegimenLinesForFHIR[x][1]",
					"        ",
					"        pm.variables.set('artLineFhir', FHIRRegimenLine)",
					"    }",
					"}",
					"",
					"pm.variables.set('artRegimen', artInitiationRegimen)",
					"",
					"",
					"pm.variables.set('deathDate', dateOfDeath)",
					"pm.variables.set('deathCause', deathCause)",
					"",
					"for (let x = 0; x < deathCausesForFHIR.length; x++) {",
					"    if (deathCausesForFHIR[x][0] == deathCause) {",
					"        var FHIRDeathCause = deathCausesForFHIR[x][1]",
					"        ",
					"        pm.variables.set('deathCauseFhir', FHIRDeathCause)",
					"    }",
					"}",
					"",
					"pm.variables.set('dateOfLastVisit', deathDateLastClinicalVisit)",
					"",
					"",
					"const popStatus = ['General Population', 'MSM', 'FSW', 'MSW', 'PWID', 'PWUD', 'Transgender']",
					"const popStatusFhir = ['GENERAL-POPULATION', 'MSM', 'FSW', 'MSW', 'PWID', 'PWUD', 'TRANSGENDER']",
					"const popStatusIndex = getRandomInt(0, popStatus.length - 1)",
					"pm.variables.set('popStatus', popStatus[popStatusIndex])",
					"pm.variables.set('popStatusFhir', popStatusFhir[popStatusIndex])",
					"",
					"const maritalStatus = ['Never Married', 'Married Monogamous', 'Married Polygamous', 'Cohabiting', 'Divorced/Separated']",
					"const maritalStatusFhir = ['S', 'M', 'P', 'T', 'D']",
					"const maritalStatusIndex = getRandomInt(0, maritalStatus.length - 1)",
					"pm.variables.set('maritalStatus', maritalStatus[maritalStatusIndex])",
					"pm.variables.set('maritalStatusFhir', maritalStatusFhir[maritalStatusIndex])",
					"",
					"const recencyTestConducted = ['Yes', 'No']",
					"pm.variables.set('recencyTestConducted', recencyTestConducted[getRandomInt(0, 1)])",
					"pm.variables.set('recencyTestConductedFhir', pm.variables.get('recencyTestConducted') === 'Yes')",
					"",
					"const recencyStatus = ['Recent', 'Not Recent']",
					"pm.variables.set('recencyStatus', recencyStatus[getRandomInt(0, 1)])",
					"pm.variables.set('recencyStatusFhir', pm.variables.get('recencyStatus') === 'Recent')",
					"",
					"",
					"if (!isNullOrEmpty(cd4CollectionDate))",
					"{",
					"    var randomCd4Guid = pm.variables.get('randomCd4Guid')",
					"",
					"    const cd4EntryObject =  ",
					"         '{'",
					"            + '\\n\"title\": \"CD4\",'",
					"            + '\\n\"code\": {'",
					"            + '\\n\"coding\": ['",
					"                + '\\n{'",
					"                    + '\\n\"code\": \"CD4\",'",
					"                    + '\\n\"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"'",
					"                + '\\n}'",
					"            + '\\n]'",
					"        + '\\n},'",
					"        + '\\n\"entry\": ['",
					"            + '\\n{'",
					"                + '\\n\"reference\": ' + '\"Observation/' + randomCd4Guid + '\"'",
					"            + '\\n}'",
					"        + '\\n]'",
					"    + '\\n}'",
					"",
					"    pm.variables.set('cd4EntryObject', cd4EntryObject)",
					"",
					"    if (!isNullOrEmpty(cd4CollectionDate))",
					"    {",
					"        pm.variables.set('cd4CollectionDate', cd4CollectionDate)",
					"    }",
					"    else",
					"    {",
					"        pm.variables.set('cd4CollectionDate', '')",
					"    }",
					"",
					"    if (!isNullOrEmpty(cd4Result))",
					"    {",
					"        pm.variables.set('cd4Result', cd4Result)",
					"    }",
					"    else",
					"    {",
					"        pm.variables.set('cd4Result', null)",
					"    }",
					"",
					"    if (!isNullOrEmpty(cd4Percentage))",
					"    {",
					"        pm.variables.set('cd4Percentage', cd4Percentage)",
					"    }",
					"    else",
					"    {",
					"        pm.variables.set('cd4Percentage', null)",
					"    }",
					"}",
					"else",
					"{",
					"    pm.variables.set('cd4EntryObject', \"{ }\")",
					"    pm.variables.set('cd4CollectionDate', '')",
					"    pm.variables.set('cd4Result', null)",
					"    pm.variables.set('cd4Percentage', null)",
					"}",
					"",
					"const numRegSwitch = getRandomInt(0, 3)",
					"const lines = ['First Line', 'Second Line', 'Third Line', 'Special/Unknown']",
					"const linesFhir = ['FIRST-LINE','SECOND-LINE','THIRD-LINE','SPECIAL-UNKNOWN']",
					"",
					"let switchDate = moment(visitDate)",
					"let switchDates = []",
					"let switchLines = []",
					"let switchLinesFhir = []",
					"let switchRegimens = []",
					"for (let i = 0; i < numRegSwitch; i++) {",
					"  switchDates.push(switchDate.format('YYYY-MM-DD'))",
					"  switchLines.push(lines[i+1])",
					"  switchLinesFhir.push(linesFhir[i+1])",
					"  switchRegimens.push(regimens[getRandomInt(0, 1)])",
					"  switchDate = moment(switchDate).add(getRandomInt(60, 240), 'days')",
					"}",
					"",
					"pm.variables.set('switchDate1', switchDates[0] || '')",
					"pm.variables.set('switchLine1', switchLines[0] || '')",
					"pm.variables.set('switchLineFhir1', switchLinesFhir[0] || '')",
					"pm.variables.set('switchRegimen1', switchRegimens[0] || '')",
					"",
					"",
					"if (!isNullOrEmpty(vlDate))",
					"{",
					"    var randomViralSuppressionGuid = pm.variables.get('randomViralSuppressionGuid')",
					"",
					"    const viralSuppressionObject =  ",
					"         '{'",
					"            + '\\n\"title\": \"Viral Suppression\",'",
					"            + '\\n\"code\": {'",
					"            + '\\n\"coding\": ['",
					"                + '\\n{'",
					"                    + '\\n\"code\": \"VIRAL-SUPPRESSION\",'",
					"                    + '\\n\"system\": \"http://openhie.org/fhir/hiv-casereporting/CodeSystem/cs-case-report-sections\"'",
					"                + '\\n}'",
					"            + '\\n]'",
					"        + '\\n},'",
					"        + '\\n\"entry\": ['",
					"            + '\\n{'",
					"                + '\\n\"reference\": ' + '\"Observation/' + randomViralSuppressionGuid + '\"'",
					"            + '\\n}'",
					"        + '\\n]'",
					"    + '\\n}'",
					"",
					"    pm.variables.set('viralSuppressionObject', viralSuppressionObject)",
					"    pm.variables.set('vlCommentsDate', moment(visitDate))",
					"    pm.variables.set('vlComments', \"My test viral...\")",
					"",
					"    if (!isNullOrEmpty(vlDate))",
					"    {",
					"        pm.variables.set('vlDate', vlDate)",
					"    }",
					"    else",
					"    {",
					"        pm.variables.set('vlDate', '')",
					"    }",
					"",
					"    if (!isNullOrEmpty(vlResult))",
					"    {",
					"        pm.variables.set('vlResult', vlResult)",
					"    }",
					"    else",
					"    {",
					"        pm.variables.set('vlResult', null)",
					"    }",
					"",
					"    if (!isNullOrEmpty(vlInterpretation))",
					"    {",
					"        pm.variables.set('vlInterpretation', vlInterpretation)",
					"",
					"        for (let x = 0; x < interpretationsForForFHIR.length; x++) {",
					"            if (interpretationsForForFHIR[x][0] == vlInterpretation) {",
					"                var FHIRVlInterpretation = interpretationsForForFHIR[x][1]",
					"                ",
					"                pm.variables.set('vlInterpretationFhir', FHIRVlInterpretation)",
					"            }",
					"        }",
					"    }",
					"    else",
					"    {",
					"        pm.variables.set('vlInterpretation', null)",
					"        pm.variables.set('vlInterpretationFhir', null)",
					"    }",
					"",
					"    if (!isNullOrEmpty(currVLSupression))",
					"    {",
					"        pm.variables.set('currVLSupression', currVLSupression)",
					"",
					"        for (let x = 0; x < suppressionStatusForForFHIR.length; x++) {",
					"            if (suppressionStatusForForFHIR[x][0] == currVLSupression) {",
					"                var FHIRVlSupressionStatus = suppressionStatusForForFHIR[x][1]",
					"                ",
					"                pm.variables.set('currVLSupressionFhir', FHIRVlSupressionStatus)",
					"            }",
					"        }",
					"    }",
					"    else",
					"    {",
					"        pm.variables.set('currVLSupression', null)",
					"        pm.variables.set('currVLSupressionFhir', null)",
					"    }",
					"}",
					"else",
					"{",
					"    pm.variables.set('viralSuppressionObject', \"{ }\")",
					"    pm.variables.set('vlDate', '')",
					"    pm.variables.set('vlResult', null)",
					"    pm.variables.set('vlInterpretation', null)",
					"    pm.variables.set('vlInterpretationFhir', null)",
					"    pm.variables.set('currVLSupression', null)",
					"    pm.variables.set('currVLSupressionFhir', null)",
					"}",
					"",
					"const viralLoadIndicationReasons = [",
					"        [\"Baseline Viral Load\", \"5d4e13af-92ec-4b91-a8e4-97818810e577\"],",
					"        [\"Clinical failure\", \"163523\"],",
					"        [\"Change regimen\", \"1259\"],",
					"        [\"Regimen failure\", \"843\"],",
					"        [\"Confirmation of treatment failure\", \"67143af5-c443-4a4f-a678-f3981b4fcb0f\"],",
					"        [\"Currently breastfeeding child\", \"5632\"],",
					"        [\"Currently pregnant\", \"1434\"],",
					"        [\"Persistent low-Level viremia\", \"e185de1e-a9b3-4b10-86df-2300bf4476bb\"],",
					"        [\"Recency Assay\", \"c2aed192-73fc-405f-8cc2-776a4da81d59\"],",
					"        [\"Repeat\", \"162081\"],",
					"        [\"Results not available\", \"164369\"],",
					"        [\"Routine Viral Load\", \"be5d6a4a-4018-49dd-869f-273c9f5fec9e\"],",
					"        [\"Results not available\", \"164369\"],",
					"        [\"Routine Viral Load\", \"be5d6a4a-4018-49dd-869f-273c9f5fec9e\"]",
					"]",
					"",
					"const viralLoadIndicationReasonIndex = getRandomInt(0, viralLoadIndicationReasons.length - 1)",
					"pm.variables.set('viralLoadIndicationReason', viralLoadIndicationReasons[viralLoadIndicationReasonIndex][0])",
					"pm.variables.set('viralLoadIndicationReasonCode', viralLoadIndicationReasons[viralLoadIndicationReasonIndex][1])",
					"",
					"",
					"const artStatuses = [",
					"        [\"Transfer-out\", \"159492\"],",
					"        [\"Deceased\", \"159\"],",
					"        [\"Treatment interrupted/stopped\", \"164349\"]",
					"]",
					"",
					"const artStatusIndex = getRandomInt(0, artStatuses.length - 1)",
					"pm.variables.set('artStatusText', artStatuses[artStatusIndex][0])",
					"pm.variables.set('artStatusCode', artStatuses[artStatusIndex][1])",
					"",
					"pm.variables.set('random_collection_date', moment(visitDate).add(days, 'days').format('YYYY-MM-DD'))",
					"pm.variables.set('hivServiceRequestDate', moment(visitDate))",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "openhimUrl",
			"value": "http://localhost:5001"
		}
	]
}
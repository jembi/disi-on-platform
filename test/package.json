{
  "name": "cdr-tests",
  "version": "0.1.0",
  "main": "index.js",
  "author": "Jembi",
  "license": "MIT",
  "dependencies": {
    "@apideck/postman-to-k6": "rcrichton/postman-to-k6",
    "@elastic/elasticsearch": "^8.2.1",
    "@types/google-apps-script": "^1.0.45",
    "axios": "^0.24.0",
    "body-parser": "^1.20.0",
    "concurrently": "^6.0.2",
    "config": "^3.3.7",
    "cucumber": "^6.0.7",
    "dotenv": "^10.0.0",
    "elasticsearch": "^16.7.3",
    "elasticsearch-browser": "^16.7.1",
    "express": "^4.18.1",
    "get-json": "^1.0.1",
    "googleapis": "^95.0.0",
    "isomorphic-fetch": "^3.0.0",
    "jest": "^27.4.5",
    "jsonwebtoken": "^8.5.1",
    "moment": "^2.29.1",
    "newman": "^5.2.2",
    "node-fetch": "^2.6.1"
  },
  "scripts": {
    "bootstrap": "yarn newman run 'CDR.postman_collection.json' --folder 'Bootstrap'",
    "test:jsreport-scripts": "jest -i --verbose",
    "test:bdd": "cucumber-js --publish-quiet",
    "test": "yarn newman run 'CDR.postman_collection.json' --folder 'All Reports QA'",
    "test:1000": "yarn test -n 1000 --delay-request 1000",
    "test:100": "yarn test -n 100 --delay-request 1",
    "test:abuse": "yarn test -n 1000",
    "test:abuse-x4": "yarn concurrently \"yarn test:abuse\" \"yarn test:abuse\" \"yarn test:abuse\" \"yarn test:abuse\"",
    "bootstrap:qa": "yarn bootstrap --env-var openhimUrl=https://openhimcore.qa.jembi.cloud/fhir/",
    "test:qa": "yarn test --env-var openhimUrl=https://openhimcore.qa.jembi.cloud/fhir/",
    "test:qa:1000": "yarn test:1000 --env-var openhimUrl=https://openhimcore.qa.jembi.cloud/fhir/",
    "bootstrap:stg": "yarn bootstrap --env-var openhimUrl=https://openhimcore.stg.jembi.cloud/fhir/",
    "test:stg": "yarn test --env-var openhimUrl=https://openhimcore.stg.jembi.cloud/fhir/",
    "test:stg:1000": "yarn test:1000 --env-var openhimUrl=https://openhimcore.stg.jembi.cloud/fhir/",
    "bootstrap:load": "yarn bootstrap --env-var openhimUrl=https://openhimcore.load.jembi.cloud/fhir/",
    "test:load": "yarn test --env-var openhimUrl=https://openhimcore.load.jembi.cloud/fhir/",
    "test:load:1000": "yarn test:1000 --env-var openhimUrl=https://openhimcore.load.jembi.cloud/fhir/",
    "bootstrap:test": "yarn bootstrap --env-var openhimUrl=https://openhimcore.test.jembi.cloud/fhir/",
    "test:test": "yarn test --env-var openhimUrl=https://openhimcore.test.jembi.cloud/fhir/",
    "test:test:1000": "yarn test:1000 --env-var openhimUrl=https://openhimcore.test.jembi.cloud/fhir/",
    "loadtest": "yarn loadtest:generate && yarn loadtest:build && yarn loadtest:run",
    "loadtest:generate": "node gen-loadtest-collection.js",
    "loadtest:build": "yarn postman-to-k6 './generated/Loadtest.postman_collection.json' -e Loadtest-local.postman_environment.json -o generated/k6/k6-script.js && sed -i '/const moment/d' generated/k6/k6-script.js && sed -i '/const uuid/d' generated/k6/k6-script.js && sed -i \"2i import moment from 'https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js';import { uuidv4 as v4 } from 'https://jslib.k6.io/k6-utils/1.0.0/index.js';const uuid = { v4 };\" generated/k6/k6-script.js",
    "loadtest:run": "docker run --add-host=host.docker.internal:host-gateway --rm -v `pwd`/generated/k6:/generated/k6 loadimpact/k6 run /generated/k6/k6-script.js -i ${ITERATIONS:-1000} --vus ${CONCURRENCY:-1}",
    "loadtest:remote": "yarn loadtest:generate && yarn loadtest:remote:build && yarn loadtest:run",
    "loadtest:remote:build": "yarn postman-to-k6 './generated/Loadtest.postman_collection.json' -e Loadtest-remote.postman_environment.json -o generated/k6/k6-script.js && sed -i '/const moment/d' generated/k6/k6-script.js && sed -i '/const uuid/d' generated/k6/k6-script.js && sed -i \"2i import moment from 'https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js';import { uuidv4 as v4 } from 'https://jslib.k6.io/k6-utils/1.0.0/index.js';const uuid = { v4 };\" generated/k6/k6-script.js",
    "loadtest:by-type": "yarn loadtest:by-type:generate && yarn loadtest:by-type:build && yarn loadtest:by-type:run",
    "loadtest:by-type:generate": "yarn loadtest:generate && node gen-loadtest-by-type-collections.js",
    "loadtest:by-type:build": "./build-by-type.sh",
    "loadtest:by-type:run": "./run-by-type.sh",
    "loadtest:remote:by-type": "yarn loadtest:remote:by-type:generate && yarn loadtest:remote:by-type:build && yarn loadtest:by-type:run",
    "loadtest:remote:by-type:build": "./build-by-type-remote.sh",
    "loadtest:remote:by-type:generate": "yarn loadtest:generate && node gen-loadtest-by-type-collections.js",
    "loadtest:clean": "rm -R generated/*"
  },
  "devDependencies": {
    "@cucumber/cucumber": "^8.0.0-rc.2",
    "chai": "^4.3.4"
  }
}
